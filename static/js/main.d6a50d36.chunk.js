(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},43:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){"use strict";c.r(t);var s=c(23),a=c.n(s),n=c(21),r=c(10),i=c(16),l=c(8),o="favourite",j=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]},u={favorites:j(o)},d=Object(i.b)({name:"favorite",initialState:u,reducers:{addFavourite:function(e,t){!function(e,t){var c=j(e);"string"===typeof t?c.push(t):t.forEach((function(e){return c.push(e)})),localStorage.setItem(e,JSON.stringify(c))}(o,t.payload),e.favorites=[].concat(Object(l.a)(e.favorites),[t.payload])},removeFavourite:function(e,t){!function(e,t){var c=j(e);localStorage.setItem(e,JSON.stringify(c.filter((function(e){return e!==t}))))}(o,t.payload),e.favorites=e.favorites.filter((function(e){return e!==t.payload}))}}}),m=d.actions,h=m.addFavourite,b=m.removeFavourite,_=d.reducer,O="withdraw",f=function(){var e=localStorage.getItem(O);return e?JSON.parse(e):{}},x={withdraw:f()},v=Object(i.b)({name:O,initialState:x,reducers:{addWithdraw:function(e,t){Object.prototype.hasOwnProperty.call(f(),t.payload)?e.withdraw[t.payload]+=1:e.withdraw[t.payload]=1,function(e){localStorage.setItem(O,JSON.stringify(e))}(e.withdraw)},removeWithdraw:function(e,t){e.withdraw[t.payload]>1&&(e.withdraw[t.payload]-=1)},deleteWithdraw:function(e,t){delete e.withdraw[t.payload]}}}),p=v.actions,g=p.addWithdraw,N=(p.removeWithdraw,p.deleteWithdraw),y=v.reducer,w=Object(i.a)({reducer:{favorite:_,withdraw:y}}),k=c(4),S=c(0),C=c(3),E=(c(43),c(30),c(9)),M=c.n(E),W=n.c,F=c(1),A=function(){var e=W((function(e){return e.favorite.favorites})).length,t=W((function(e){return e.withdraw.withdraw})),c=Object(S.useMemo)((function(){var e=0;return Object.keys(t).forEach((function(c){e+=t[c]})),e}),[t]);return Object(F.jsx)("header",{className:"header",children:Object(F.jsxs)("div",{className:"header__content",children:[Object(F.jsxs)("div",{className:"header__right",children:[Object(F.jsx)("div",{className:"logo",children:Object(F.jsx)(r.c,{to:"/home",className:"logo__link",children:Object(F.jsx)("img",{src:"/img/header/logo.svg",alt:"logo",className:"logo__img"})})}),Object(F.jsx)("nav",{className:"nav",children:Object(F.jsxs)("ul",{className:"nav__list",children:[Object(F.jsx)("li",{className:"nav__item",children:Object(F.jsx)(r.c,{to:"/home",className:function(e){var t=e.isActive;return M()("nav__link",{"is-active":t})},children:"Home"})}),Object(F.jsx)("li",{className:"nav__item",children:Object(F.jsx)(r.c,{to:"/phones",className:function(e){var t=e.isActive;return M()("nav__link",{"is-active":t})},children:"Phones"})}),Object(F.jsx)("li",{className:"nav__item",children:Object(F.jsx)(r.c,{to:"/tablets",className:function(e){var t=e.isActive;return M()("nav__link",{"is-active":t})},children:"Tablets"})}),Object(F.jsx)("li",{className:"nav__item",children:Object(F.jsx)(r.c,{to:"/accessories",className:function(e){var t=e.isActive;return M()("nav__link",{"is-active":t})},children:"Accessories"})})]})})]}),Object(F.jsxs)("div",{className:"header__left",children:[Object(F.jsxs)(r.c,{to:"/favourites",className:function(e){var t=e.isActive;return M()("header__icon",{"is-active":t})},children:[e>0&&Object(F.jsx)("p",{className:"header__ellipse",children:e}),Object(F.jsx)("img",{src:"/img/header/favorite(Stroke).svg",alt:"Favorite"})]}),Object(F.jsxs)(r.c,{to:"/withdraw",className:function(e){var t=e.isActive;return M()("header__icon",{"is-active":t})},children:[c>0&&Object(F.jsx)("p",{className:"header__ellipse",children:c}),Object(F.jsx)("img",{src:"/img/header/withdraw.svg",alt:"Withdraw"})]})]})]})})},I=(c(46),c(47),function(e){var t=e.imgs,c=Object(S.useRef)(null),s=Object(S.useRef)(null),a=Object(S.useState)(1),n=Object(k.a)(a,2),r=n[0],i=n[1],o=Object(S.useState)(0),j=Object(k.a)(o,2),u=j[0],d=j[1],m=Object(S.useMemo)((function(){if(t.length>1){var e=t.map((function(e){return Object(F.jsx)("li",{className:"carousel__slide",children:Object(F.jsx)("img",{src:e.path,alt:e.desc})},e.id)}));return[Object(F.jsx)("li",{className:"carousel__slide",children:Object(F.jsx)("img",{src:t[t.length-1].path,alt:t[t.length-1].desc})},t[0].id-1)].concat(Object(l.a)(e),[Object(F.jsx)("li",{className:"carousel__slide",children:Object(F.jsx)("img",{src:t[0].path,alt:t[0].desc})},t[t.length-1].id+1)])}return Object(F.jsx)("li",{className:"carousel__slide",children:t[0]})}),[t]),h=Object(S.useCallback)((function(e){c.current&&(c.current.style.transitionDuration="400ms","prev"===e?r<=1?(d(0),i(t.length)):(d(c.current.clientWidth*(r-1)),i((function(e){return e-1}))):"next"===e&&(r>=t.length?(d(c.current.clientWidth*(t.length+1)),i(1)):(d(c.current.clientWidth*(r+1)),i((function(e){return e+1})))))}),[r,t]);return Object(S.useEffect)((function(){var e=function(){c.current&&(r<=1&&(c.current.style.transitionDuration="0ms",d(c.current.clientWidth*r)),r>=t.length&&(c.current.style.transitionDuration="0ms",d(c.current.clientWidth*t.length)))};return document.addEventListener("transitionend",e),function(){document.removeEventListener("transitionend",e)}}),[r,t]),Object(S.useLayoutEffect)((function(){c.current&&d(c.current.clientWidth*r)}),[]),Object(S.useEffect)((function(){return s.current&&clearInterval(s.current),s.current=setInterval((function(){h("next")}),5e3),function(){s.current&&clearInterval(s.current)}}),[h]),Object(F.jsxs)("div",{className:"carousel",children:[Object(F.jsxs)("div",{className:"carousel__body",children:[Object(F.jsx)("button",{type:"button",className:"carousel__button",onClick:function(){return h("prev")},children:Object(F.jsx)("img",{src:"./img/Vector (Stroke).svg",alt:"Prev"})}),Object(F.jsx)("div",{className:"carousel__wrapper",children:Object(F.jsx)("ul",{ref:c,className:"carousel__container",style:{transform:"translate3d(".concat(-u,"px, 0, 0)")},children:m})}),Object(F.jsx)("button",{type:"button",className:"carousel__button",onClick:function(){return h("next")},children:Object(F.jsx)("img",{src:"./img/Vector (Stroke).svg",alt:"Next",className:"carousel__mirrored"})})]}),Object(F.jsx)("div",{className:"carousel__info",children:t.map((function(e,t){return Object(F.jsx)("div",{className:M()("carousel__info-tile",{"carousel__active-tile":t+1===r})},Math.random())}))})]})}),P=function(){return Object(F.jsx)("section",{className:"novelties",children:Object(F.jsx)(I,{imgs:[{id:1,path:"/img/banner.png",desc:"photo 1"},{id:2,path:"/img/banner.png",desc:"photo 1"},{id:3,path:"/img/banner.png",desc:"photo 1"}]})})},J=(c(48),function(){return Object(F.jsx)("footer",{className:"footer",children:Object(F.jsxs)("div",{className:"container footer__content",children:[Object(F.jsx)("div",{className:"footer__logo",children:Object(F.jsx)("a",{href:"/",className:"footer__link",children:Object(F.jsx)("img",{src:"/img/header/logo.svg",alt:"logo"})})}),Object(F.jsx)("div",{className:"footer__contacts",children:Object(F.jsx)("nav",{className:"nav",children:Object(F.jsxs)("ul",{className:"nav__list",children:[Object(F.jsx)("li",{className:"nav__item",children:Object(F.jsx)("a",{href:"/",className:"nav__link",children:"Github"})}),Object(F.jsx)("li",{className:"nav__item",children:Object(F.jsx)("a",{href:"/",className:"nav__link",children:"Contacts"})}),Object(F.jsx)("li",{className:"nav__item",children:Object(F.jsx)("a",{href:"/",className:"nav__link",children:"Rights"})})]})})}),Object(F.jsxs)("a",{href:"/",className:"footer__to-top",children:[Object(F.jsx)("h3",{className:"footer__to-top-text",children:"Back to top"}),Object(F.jsx)("div",{className:"footer__to-top-button",children:Object(F.jsx)("img",{src:"/img/Vector (Stroke).svg",alt:"to top",className:"footer__arrow"})})]})]})})}),B=(c(49),c(50),function(e){var t=e.item,c=W((function(e){return e.favorite.favorites})),s=W((function(e){return e.withdraw.withdraw})),a=Object(n.b)(),r=Object(S.useMemo)((function(){return Object.keys(s).includes(t.id)}),[s]),i=Object(S.useMemo)((function(){return c.includes(t.id)}),[c]),l=function(e){"favorite"===e?a(i?b(t.id):h(t.id)):"withdraw"===e&&a(r?N(t.id):g(t.id))};return Object(F.jsxs)("div",{className:"item",children:[Object(F.jsxs)("div",{className:"item__header",children:[Object(F.jsx)("div",{className:"item__photo-container",children:Object(F.jsx)("img",{src:t.imageUrl,alt:t.id,className:"item__photo"})}),Object(F.jsx)("h2",{className:"item__title",children:t.name})]}),Object(F.jsxs)("div",{className:"item__body",children:[Object(F.jsx)("div",{className:"item__price",children:t.discount?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("p",{className:"item__counted",children:Math.ceil(t.price*((100-t.discount)/100))}),Object(F.jsx)("p",{className:"item__initial-price",children:t.price})]}):Object(F.jsx)("p",{className:"item__counted",children:t.price})}),Object(F.jsx)("div",{className:"item__specs specs",children:Object(F.jsxs)("ul",{className:"item__specs specs__list",children:[Object(F.jsxs)("li",{className:"specs__item",children:[Object(F.jsx)("p",{className:"specs__name",children:"Screen"}),Object(F.jsx)("p",{className:"specs__value",children:t.screen})]}),Object(F.jsxs)("li",{className:"specs__item",children:[Object(F.jsx)("p",{className:"specs__name",children:"Capacity"}),Object(F.jsx)("p",{className:"specs__value",children:t.capacity})]}),Object(F.jsxs)("li",{className:"specs__item",children:[Object(F.jsx)("p",{className:"specs__name",children:"RAM"}),Object(F.jsx)("p",{className:"specs__value",children:t.ram})]})]})}),Object(F.jsxs)("div",{className:"item__buttons",children:[Object(F.jsx)("button",{type:"button",className:M()("item__buy",{"item__buy--selected":r}),onClick:function(){return l("withdraw")},children:"Add to cart"}),Object(F.jsx)("button",{type:"button",className:"item__favorite",onClick:function(){return l("favorite")},children:Object(F.jsx)("img",{src:"/img/ShopItem/favorite".concat(i?"(filled)":"",".svg"),alt:"add to favorite"})})]})]})]})}),V=(c(51),function(e){var t=e.title,c=e.items,s=Object(S.useState)(0),a=Object(k.a)(s,2),n=a[0],r=a[1],i=Object(S.useMemo)((function(){return c?Math.ceil(c.length/4):0}),[c]),l=function(e){"next"===e&&n<i-1?r((function(e){return e+1})):"prev"===e&&n>0&&r((function(e){return e-1}))};return Object(F.jsxs)("div",{className:"itemCarousel",children:[Object(F.jsxs)("div",{className:"itemCarousel__header",children:[Object(F.jsx)("h2",{className:"itemCarousel__title",children:t}),Object(F.jsxs)("div",{className:"itemCarousel__buttons",children:[Object(F.jsx)("button",{disabled:0===n,className:M()("itemCarousel__button","arrow__reverse",{"itemCarousel__button--disabled":0===n}),type:"button",onClick:function(){return l("prev")},children:Object(F.jsx)("img",{src:"/img/Vector (Stroke).svg",alt:"prev",className:"arrow__reverse"})}),Object(F.jsx)("button",{disabled:n===i-1,className:M()("itemCarousel__button",{"itemCarousel__button--disabled":n===i-1}),type:"button",onClick:function(){return l("next")},children:Object(F.jsx)("img",{src:"/img/Vector (Stroke).svg",alt:"prev",className:"arrow"})})]})]}),Object(F.jsx)("div",{className:"itemCarousel__body",children:Object(F.jsx)("div",{className:"itemCarousel__wrapper",style:{transform:"translateX(".concat(1156*-n,"px)")},children:null===c||void 0===c?void 0:c.map((function(e){return Object(F.jsx)(B,{item:e},e.id)}))})})]})}),R=function(e){var t=e.products,c=Object(S.useMemo)((function(){return t.sort((function(e,t){return t.discount-e.discount})).filter((function(e){return e.discount>0}))}),[t]);return Object(F.jsx)("section",{className:"hotPrice",children:c&&Object(F.jsx)(V,{title:"Hot prices",items:c})})},D="https://mate-academy.github.io/react_phone-catalog/api/products",H=function(){return fetch("".concat(D,".json")).then((function(e){if(!e.ok)throw new Error;return e.json()}))},L=(c(52),function(e){var t=e.products,c=Object(S.useMemo)((function(){return t.filter((function(e){return e.age<10})).sort((function(e,t){return e.age-t.age}))}),[t]);return Object(F.jsx)("section",{className:"newModels",children:c&&Object(F.jsx)(V,{title:"Brand new models",items:c})})}),T=(c(53),function(){return Object(F.jsxs)("section",{className:"category",children:[Object(F.jsx)("h2",{className:"category__title",children:"Shop by category"}),Object(F.jsxs)("ul",{className:"category__list",children:[Object(F.jsxs)("li",{className:"category__item",children:[Object(F.jsx)("img",{src:"/img/Category/phones.jpg",alt:"Phones",className:"category__photo"}),Object(F.jsx)("h2",{className:"category__name",children:"Mobile phones"}),Object(F.jsx)("p",{className:"category__amount",children:"amount"})]}),Object(F.jsxs)("li",{className:"category__item",children:[Object(F.jsx)("img",{src:"/img/Category/tablets.jpg",alt:"Phones",className:"category__photo"}),Object(F.jsx)("h2",{className:"category__name",children:"Tabets"}),Object(F.jsx)("p",{className:"category__amount",children:"amount"})]}),Object(F.jsxs)("li",{className:"category__item",children:[Object(F.jsx)("img",{src:"/img/Category/accessories.jpg",alt:"Phones",className:"category__photo"}),Object(F.jsx)("h2",{className:"category__name",children:"Accessories"}),Object(F.jsx)("p",{className:"category__amount",children:"amount"})]})]})]})}),U=(c(54),function(e){var t=e.pathElems,c=e.pathBoldElems;return Object(F.jsxs)("div",{className:"path",children:[Object(F.jsx)(r.b,{to:"/home",className:"path__link",children:Object(F.jsx)("img",{src:"./img/path/pathHome.svg",alt:"home",className:"path__img"})}),Object(F.jsx)("div",{className:"path__arrow",children:">"}),t.map((function(e,t,s){return s.length-1>t?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(r.b,{to:"/".concat(e),className:M()("path__text",{path__bold:c.includes(e)}),children:e}),Object(F.jsx)("div",{className:"path__arrow",children:">"})]}):Object(F.jsx)(r.b,{to:"/".concat(e),className:M()("path__text",{path__bold:c.includes(e)}),children:e})}))]})}),G=(c(55),function(){var e=Object(S.useState)([]),t=Object(k.a)(e,2),c=t[0],s=t[1],a=function(){var e=window.location.pathname.split("/"),t=e[e.length-1];return t[0].toUpperCase()+t.slice(1)},n=W((function(e){return e.favorite.favorites}));return Object(S.useEffect)((function(){H().then((function(e){n.forEach((function(t){var c=e.find((function(e){return e.id===t}));c&&s((function(e){return[].concat(Object(l.a)(e),[c])}))}))}))}),[n]),Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("section",{className:"favourites",children:[Object(F.jsx)(U,{pathElems:[a()],pathBoldElems:[]}),Object(F.jsx)("h1",{className:"favourites__title",children:a()}),Object(F.jsx)("h3",{className:"favourites__subtitle",children:"".concat(n.length," items")}),Object(F.jsx)("div",{className:"favourites__body",children:c.map((function(e){return Object(F.jsx)(B,{item:e},e.id)}))})]})})}),X=(c(56),function(){var e=Object(S.useState)(),t=Object(k.a)(e,2),c=t[0],s=t[1];return Object(S.useEffect)((function(){H().then((function(e){return s(e)}))}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(A,{}),Object(F.jsx)("main",{className:"main",children:Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)(C.d,{children:[Object(F.jsx)(C.b,{path:"/",element:Object(F.jsx)(C.a,{to:"/home",replace:!0})}),Object(F.jsx)(C.b,{path:"/home",element:Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{}),c&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(R,{products:c}),Object(F.jsx)(T,{}),Object(F.jsx)(L,{products:c})]})]})}),Object(F.jsx)(C.b,{path:"/favourites",element:Object(F.jsx)(G,{})}),Object(F.jsx)(C.b,{path:"*",element:Object(F.jsx)("p",{children:"Page not found"})})]})})}),Object(F.jsx)(J,{})]})});a.a.render(Object(F.jsx)(n.a,{store:w,children:Object(F.jsx)(r.a,{children:Object(F.jsx)(X,{})})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.d6a50d36.chunk.js.map